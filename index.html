<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>加油站岗位技能考核系统 V1.5 (增强版)</title>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
    <style>
        :root { --primary: #2563eb; --success: #059669; --error: #dc2626; --bg: #f1f5f9; --text: #1e293b; }
        body { font-family: -apple-system, sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 10px; }
        .container { max-width: 600px; margin: auto; padding-bottom: 120px; }
        .card { background: white; border-radius: 12px; padding: 15px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); margin-bottom: 15px; }
        .header-title { text-align: center; color: var(--primary); font-size: 1.3rem; margin: 10px 0; }
        .nav-path { font-size: 0.85rem; color: #64748b; margin-bottom: 15px; padding: 10px; background: #fff; border-radius: 8px; border-left: 5px solid var(--primary); }
        .menu-list { display: grid; gap: 10px; }
        .menu-btn { background: white; border: 1px solid #e2e8f0; border-radius: 10px; padding: 16px; text-align: left; cursor: pointer; display: flex; justify-content: space-between; align-items: center; font-size: 1rem; }
        .menu-btn:active { background: #f1f5f9; }
        .mode-tabs { display: flex; background: #e2e8f0; padding: 4px; border-radius: 8px; margin-bottom: 15px; }
        .tab { flex: 1; text-align: center; padding: 10px; font-size: 0.9rem; cursor: pointer; border-radius: 6px; }
        .tab.active { background: white; color: var(--primary); font-weight: bold; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .q-block { background: #f8fafc; padding: 14px; border-radius: 8px; margin-bottom: 5px; border: 1px solid #e2e8f0; line-height: 1.6; }
        
        /* 新增：背题模式的练习输入框 */
        .study-input { width: 100%; padding: 10px; border: 1px dashed #cbd5e1; border-radius: 6px; background: #fffbeb; font-size: 0.9rem; margin-bottom: 15px; box-sizing: border-box; resize: vertical; min-height: 60px; color: #555; }
        .study-input:focus { outline: none; border-color: var(--primary); background: #fff; }

        .input-box { width: 100%; padding: 12px; border: 2px solid #cbd5e1; border-radius: 8px; box-sizing: border-box; font-size: 1rem; margin-top: 5px; }
        .input-correct { border-color: var(--success); background: #ecfdf5; }
        .input-error { border-color: var(--error); background: #fef2f2; }
        .ans-msg { color: #b91c1c; background: #fee2e2; padding: 10px; border-radius: 6px; font-size: 0.85rem; margin-top: 6px; border-left: 4px solid var(--error); }
        .opt-btn { width: 100%; padding: 14px; margin: 8px 0; border: 2px solid #e2e8f0; border-radius: 10px; background: white; text-align: left; font-size: 1rem; }
        .opt-correct { border-color: var(--success) !important; background: #ecfdf5; color: var(--success); font-weight: bold; }
        .opt-error { border-color: var(--error) !important; background: #fef2f2; color: var(--error); }
        .footer-nav { position: fixed; bottom: 0; left: 0; right: 0; background: white; padding: 12px; display: flex; gap: 10px; box-shadow: 0 -5px 15px rgba(0,0,0,0.1); z-index: 1000; }
        .f-btn { flex: 1; padding: 14px; border-radius: 10px; border: none; font-weight: bold; cursor: pointer; }
        .f-blue { background: var(--primary); color: white; }
        .f-gray { background: #f1f5f9; color: #475569; border: 1px solid #e2e8f0; }

        /* 开关样式 */
        .switch-container { display: flex; align-items: center; justify-content: space-between; background: #fff; padding: 15px; border-radius: 10px; margin-bottom: 10px; border: 1px solid #e2e8f0;}
        .switch { position: relative; display: inline-block; width: 50px; height: 26px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 34px; }
        .slider:before { position: absolute; content: ""; height: 20px; width: 20px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: var(--primary); }
        input:checked + .slider:before { transform: translateX(24px); }
    </style>
</head>
<body>

<div id="app" class="container">
    <h2 class="header-title">加油站技能考核系统 V1.5</h2>
    <div class="nav-path">📍 {{ navPath }}</div>

    <div v-if="state === 'idle'" class="menu-list">
        
        <template v-if="view === 'main'">
            <div v-if="isRecoverable" @click="loadProgress" 
                style="background: #fff7ed; border: 1px solid #fb923c; color: #ea580c; padding: 15px; border-radius: 12px; margin-bottom: 20px; cursor: pointer; text-align: center; box-shadow: 0 2px 4px rgba(0,0,0,0.05);">
                <div style="font-weight: bold; font-size: 1rem; margin-bottom: 4px;">📍 检测到上次练习进度</div>
                <div style="font-size: 0.85rem; opacity: 0.9;">点击此处立即回到上次位置</div>
            </div>
            
            <div class="switch-container">
                <div>
                    <b>🔀 随机乱序模式</b>
                    <div style="font-size:0.8rem; color:#64748b; margin-top:2px;">开启后题目顺序将打乱</div>
                </div>
                <label class="switch">
                    <input type="checkbox" v-model="isRandom">
                    <span class="slider"></span>
                </label>
            </div>

            <button class="menu-btn" @click="go('menu_a')"><b>A. 突发应急处置</b> <span>❯</span></button>
            <button class="menu-btn" @click="go('menu_b')"><b>B. 应知应会</b> <span>❯</span></button>
            <button class="menu-btn" @click="go('menu_c')"><b>C. 加油机操作规程</b> <span>❯</span></button>
        </template>

        <template v-if="view === 'menu_a'">
            <button class="menu-btn" @click="startTask('emergency', 'study', 0)"><b>A1. 背题模式</b> <span>📖</span></button>
            <button class="menu-btn" @click="startTask('emergency', 'quiz', 0)"><b>A2. 填空模式</b> <span>✏️</span></button>
        </template>

        <template v-if="view === 'menu_b'">
            <button class="menu-btn" @click="startChoice"><b>B1. 选择题练习</b> <span>✅</span></button>
            <button class="menu-btn" @click="go('menu_b2')"><b>B2. 问答题练习</b> <span>❯</span></button>
        </template>

        <template v-if="view === 'menu_b2'">
            <button v-for="(item, idx) in essayData" :key="idx" class="menu-btn" @click="startTask('essay', 'study', idx)">
                <b>{{ item.title }}</b> <span>📝</span>
            </button>
        </template>

        <template v-if="view === 'menu_c'">
            <button class="menu-btn" @click="go('menu_c1')"><b>C1. 使用与维护保养</b> <span>❯</span></button>
            <button class="menu-btn" @click="go('menu_c2')"><b>C2. 特情应急处置</b> <span>❯</span></button>
        </template>

        <template v-if="view === 'menu_c1'">
            <button class="menu-btn" @click="startTask('machine', 'study', 0)"><b>C1.1 加油机使用</b> <span>📖✏️</span></button>
            <button class="menu-btn" @click="startTask('machine', 'study', 1)"><b>C1.2 加油机维护保养</b> <span>📖✏️</span></button>
        </template>

        <template v-if="view === 'menu_c2'">
            <button v-for="(item, idx) in specialData" :key="idx" class="menu-btn" @click="startTask('special', 'study', idx)">
                <b>{{ idx+1 }}. {{ item.title }}</b> <span>🚨</span>
            </button>
        </template>
    </div>

    <div v-else class="card">
        <div class="mode-tabs" v-if="state !== 'choice'">
            <div class="tab" :class="{active: subMode === 'study'}" @click="subMode = 'study'">背题模式</div>
            <div class="tab" :class="{active: subMode === 'quiz'}" @click="subMode = 'quiz'; resetQuiz()">填空模式</div>
        </div>
        
        <div style="font-size: 0.85rem; color: #64748b; margin-bottom: 10px; display: flex; justify-content: space-between; border-bottom: 1px dashed #e2e8f0; padding-bottom: 5px;">
          <span>进度：{{ (state === 'choice' ? curChoiceIdx : currentIdx) + 1 }} / {{ totalInModule }}</span>
          <span>
              总：<b style="color:var(--primary)">{{ stats.total }}</b> | 
              对：<b style="color:var(--success)">{{ stats.correct }}</b> | 
              错：<b style="color:var(--error)">{{ stats.wrong }}</b>
          </span>
      </div>

        <h3 style="color:var(--primary); margin-bottom:15px;">{{ currentQ.title || currentQ.topic }} <span v-if="isRandom" style="font-size:0.7em; color:#999; font-weight:normal;">(随机)</span></h3>

        <div v-if="state === 'choice'">
            <p><b>Q:</b> {{ currentQ.question }}</p>
            <button v-for="(v, k) in currentQ.options" :key="k" @click="handleSelect(k)" class="opt-btn" :class="getOptClass(k)">
                {{ k }}. {{ v }}
            </button>
        </div>

        <div v-else>
            <div v-for="(item, idx) in activeAnswers" :key="idx">
                <div v-if="subMode === 'study'">
                    <div class="q-block">{{ idx+1 }}. {{ item }}</div>
                    <textarea 
                        class="study-input" 
                        placeholder="默写练习区（选填，用于加强记忆，不计分）..." 
                        v-model="studyInputs[idx]"
                    ></textarea>
                </div>
                <div v-else>
                    <p style="margin:10px 0 5px; font-size:0.9rem; color:#64748b;">填空项 {{ idx+1 }}：</p>
                    <input v-model="userInputs[idx]" :disabled="isSubmitted" class="input-box" :class="getInputClass(idx)" placeholder="请输入关键内容...">
                    <div v-if="isSubmitted && !results[idx]" class="ans-msg">
                        <span v-if="fuzzyScores[idx]" style="color:#b45309">⚠️ 相似度: {{ (fuzzyScores[idx]*100).toFixed(0) }}% (不足90%)<br></span>
                        标准答案：{{ item }}
                    </div>
                    <div v-else-if="isSubmitted && results[idx] && fuzzyScores[idx] < 1" style="color:#059669; font-size:0.8rem; margin-top:3px;">
                        ✔️ 模糊匹配通过 (相似度: {{ (fuzzyScores[idx]*100).toFixed(0) }}%)
                    </div>
                </div>
            </div>
            
            <div v-if="currentModule === 'emergency'" style="margin-top:20px; border-top:1px solid #eee; padding-top:10px">
                <p><b>📦 应急物资：</b></p>
                <div v-if="subMode === 'study'" class="q-block" style="background:#fff7ed">{{ currentQ.supplies.join('、') }}</div>
                <div v-else>
                    <input v-model="supplyInput" :disabled="isSubmitted" class="input-box" placeholder="填写所需物资...">
                    <div v-if="isSubmitted && !supplyCorrect" class="ans-msg">答案：{{ currentQ.supplies.join('、') }}</div>
                </div>
            </div>
        </div>
    </div>

    <div class="footer-nav" v-if="view !== 'main' || state !== 'idle'">
        <button class="f-btn f-gray" @click="goHome">🏠 主菜单</button>
        <button class="f-btn f-gray" @click="goBack">⬅️ 上一题</button>
        <button v-if="subMode === 'quiz' && !isSubmitted && state === 'active'" class="f-btn f-blue" @click="submit">✔️ 提交核对</button>
        <button v-if="(isSubmitted || subMode === 'study') && state !== 'idle'" class="f-btn f-blue" @click="next">➡️ 下一题</button>
    </div>
</div>

<script>
// --- 数据部分保持不变，为节省篇幅略去数据定义部分，使用原有的数据变量 ---
// 您在此处保留原有的 essayData, machineData, specialData, emergencyData, choiceList 定义
// -------------------------------------------------------------------
const essayData = [
    { 
        title: "加油工岗位职责", 
        items: [
            "上岗前，按交接班制度办好接班手续（包括验核机械读码、询问加油设备工作情况、查看上一班发收存油数量等情况）。做好加油准备工作。",
            "负责安全区域内、油罐附近、泵岛周围无易燃易爆等危险物品。保持车道畅通，站内清洁卫生。",
            "严格执行防火安全管理规定和加油操作规程，杜绝违章操作。",
            "熟悉油品知识，认真执行加油制度。加油前，问清品名、规格、数量、金额等情况，加油完毕向顾客公示加油表读数，并将油枪复位。",
            "接待顾客文明礼貌、主动热情、服务周到，因客观原因暂不能加油时，应主动向客户说明。",
            "接班时应对加油机进行必要的日常保养，并定期对加油设备维护保养，做到设备洁净，不带“病”作业。出现故障，立即停止加油，由当班班长做好应急措施，及时报告站长，任何人员不得擅自维修加油设备，做好记录。",
            "营业结束后，抄机械读码，办理交接班手续。"
        ] 
    },
    { 
        title: "加油站十六禁止", 
        items: [
            "禁止穿着非制式防静电工作服上岗",
            "禁止穿高跟鞋、拖鞋、露脚趾或脚跟的鞋及带铁钉的鞋上岗",
            "禁止携带手机上岗",
            "禁止在加油区域内接打手机和吸烟",
            "禁止向散装油桶和非金属容器内加油",
            "禁止车辆未熄火加油",
            "禁止为存在明显安全隐患的车辆加油",
            "禁止让顾客自己加油",
            "禁止油枪嘴敲击油箱口",
            "禁止使用非防爆手电或打火机查看车辆油箱口的油品液面；",
            "身体带有静电时禁止加油操作",
            "禁止顾客在加油区域修车以及任何易产生火花的操作",
            "高强闪电、雷击频繁时，禁止加油作业",
            "禁止将加油枪口对准顾客",
            "禁止洒、冒油品未擦试干净，继续加油",
            "禁止使用汽油和易燃清洁剂做清洁工作。"
        ] 
    },
    { 
        title: "加油安全操作规程", 
        items: [
            "禁穿带有铁掌或铁钉的鞋子进入加油站，加油工必须规范穿着防静电工作服。",
            "加油工主动引导车辆进入加油位置。待车辆停稳，发动机熄火后加油员将油箱盖、油箱盖板打开。",
            "严禁向塑料桶内加注汽油。",
            "高强闪电和雷击频繁时，应停止加油。",
            "加油机发生故障或发生危及加油站安全的情况时，加油工应立即停止加油。",
            "加油工必须亲自操纵加油枪，提枪、挂枪要轻拿轻放，枪口移动时始终中对着地面，不得指向顾客，不得折扭加油软管或拉长式极限，加油作业时将加油枪牢固地插入油箱的罐油口内，集中精力，认真操作，做到不洒不目，加油完毕后待油枪内油品滴尽后方可挂枪，不得用油枪敲击油箱口。把油箱盖拧紧，关上油箱盖板。",
            "当发生跑、冒油时，应立即关闭加油机，推出加油车辆，清理现场。",
            "现场收取现金必须当面唱票，按实找零，并注意分辨真伪，发现假钞应拒收，并及时报告站(班)长处理。",
            "现场收取现金不得超出2000元，加油员及时解缴收银室。"
        ] 
    },
    { 
        title: "加油站“四懂四会”", 
        items: [
            "懂得岗位火灾的危险性；懂得预防火灾的措施； 懂得扑救火灾的方法；懂得逃生疏散的方法。",
            "会使用消防器材；会报火警；会扑救初起火灾；会组织疏散逃生"
        ] 
    }
];

const machineData = [
    { title: "加油机使用", items: ["加油站应对加油机使用、检查维护等相关内容进行教育培训，加油人员应熟练掌握《加油机操作规程》，按规范进行操作。",
    "使用键盘按键时不宜用力过猛。",
    "使用IC卡加油，要先插卡后加油，加油过程中不得拔卡。加油员应妥善保管IC卡，发生遗失、灰卡等情况，及时报站长进行相应处理。",
    "加油时应留意加油机工作的声音是否正常，有无金属敲击非正常声音，当加注油满时，加油枪是否自动关闭。定额、定量加油时，有否过冲现象。",
    "加油完毕后，加油管应盘放于加油岛上，避免油枪软管拖地，防止被车辆碾压。"] },
    { title: "加油机维护保养", items: ["每日用洗洁剂清洗加油机外壳处的灰尘、油污、油迹，确保加油机外表清洁干净。",
    "每周应检查油机防爆接线盒进线脱是否松脱，接地线是否牢固，各液压部件以及接合面、法兰接口处有否渗漏。发生漏油现象应停止作业，切断电源，并把加油机盖板打开通风，同时报请维保单位进行维修。",
    "雷暴风雨期间，应断开加油机、液位仪、监测设备的工作电源开关，防止雷电袭击，确保人身与财产的安全。",
    "定期对加油机滤网进行清洗，并清除油枪皮管、滤网上的污垢。",
    "非专业人员不得随意拆卸加油机内防爆装置。",
    "加油机检维修前必须断电、松开切断阀。",
    "加油机计量准确度调整必须由计量部门人员操作，按法定要求，每半年进行一次油枪计量强制检测。",
    "加油站应每月对加油机进行1次油枪计量自校验，若发生出油量超过±3‰标准的情况，应暂停使用并通知维保单位进行检修，完成检修并经计量部门重新检测合格后方可恢复使用。",
    "更换主板和流量计的加油机重新使用前，须经计量部门检定合格后方可投入使用。"] }
];

const specialData = [
    { 
        title: "油枪拉断阀被拉断", 
        items: [
            "迅速按下加油机紧急电源切断按钮。",
            "查看拉断阀损坏情况。",
            "未发生跑冒油现象，请顾客将车辆停靠在加油站旁安全地带。",
            "发生跑冒油现象，按相应流程处理。",
            "设置“设备故障，暂停使用”警示牌。"
        ] 
    },
    { 
        title: "油枪跑冒油", 
        items: [
            "迅速按下加油机紧急电源切断按钮。",
            "现场警戒，疏散人员、车辆，布置消防器材。",
            "现场禁止启动加油车辆，杜绝火源接近。",
            "用吸油毡吸干油面，再用干砂覆盖残油，待充分吸收后，用铜铝工具清理沙子。",
            "车辆推离现场。",
            "确认安全，恢复经营。"
        ] 
    },
    { 
        title: "油枪、油管、流量计等密封件渗漏", 
        items: [
            "发现轻微油迹时，使用棉质毛巾擦拭干净，持续观察。",
            "发现渗漏痕迹比较明显时，暂停使用渗漏设备。",
            "设置“设备故障，暂停使用”警示牌。",
            "向站长报告并在《加油站交接班记录》上做好相应记录。"
        ] 
    },
    { 
        title: "加油机不出油或出油量小", 
        items: [
            "检查加油机紧急电源切断按钮是否被按下，如是，确认加油机完好后将按钮复位。",
            "检查剪切阀挂钩是否挂好，如是，确认加油机完好后将挂钩复位。",
            "检查潜油泵电源是否被关闭，如是，确认加油机、潜油泵完好后将电源开关复位。",
            "发现油枪加油流速过慢时，检查滤网是否堵塞，清洗或更换滤网。",
            "检查油罐液位是否过低。"
        ] 
    },
    { 
        title: "加油机着火", 
        items: [
            "停止作业，依次关闭加油机紧急停止按钮、收银室内急停按钮、加油站电源总闸，呼喊示警 。",
            "用灭火毯覆盖或用灭火器扑救，将加油车辆推离现场。",
            "如加油机附近地面油品着火，用消防砂进行覆盖，或用灭火器扑救。",
            "现场警戒，疏散人员车辆。",
            "密切注意火势发展，情况危及人身安全时，撤离现场，等待救援。"
        ] 
    },
    { 
        title: "加错油", 
        items: [
            "停止加油，报告班长。",
            "向顾客赔礼道歉。",
            "征求顾客同意后，聘请专业人士抽出混合油品，重新加入合格油品。",
            "根据情况协商处理，赔偿顾客损失。情况严重时，联系汽车修理厂清洗油箱。"
        ] 
    }
];

const emergencyData = [
    { 
        topic: "埋地管线或埋地油罐油品泄漏", 
        measures: [
            "迅速按下紧急电源切断按钮；",
            "现场警戒，疏散人员、车辆，布置消防器材；",
            "使用消防沙等进行封堵，使用吸油毡等进行处理，防止油品造成环境污染；",
            "密切注意现场，情况危及人身安全时，有序撤离危险现场，等待救援"
        ], 
        supplies: ["灭火器", "铝桶", "吸油毡", "消防沙", "隔离警示带", "锥筒", "防爆手电筒"] 
    },
    { 
        topic: "接卸油作业中发生跑、冒油", 
        measures: [
            "迅速按下油罐车阀门紧急切断按钮；",
            "协助现场警戒，疏散人员、车辆，布置消防器材；",
            "使用消防沙等隔断、围堵。同时使用吸油毡、铝桶等回收油品；",
            "如发生火灾，立即使用灭火毯、灭火器进行初期扑救，并注意火势发展，情况危及人身安全时，撤离现场，等待救援"
        ], 
        supplies: ["灭火毯", "灭火器", "铝桶", "吸油毡", "消防沙", "隔离警示带", "锥筒", "防爆手电筒"] 
    },
    { 
        topic: "加油过程中出现跑、冒油", 
        measures: [
            "迅速按下加油机紧急电源切断按钮；",
            "现场警戒，疏散人员、车辆，布置消防器材；",
            "现场禁止启动加油车辆，杜绝火源接近；",
            "视情况布置消防器材，做好临战准备；",
            "用吸油毡吸干油面，再用干砂覆盖残油，待充分吸收后，用铜铝工具清理沙子；",
            "车辆推离现场；",
            "确认安全，恢复经营"
        ], 
        supplies: ["灭火器", "铝桶", "吸油毡", "堵漏工具", "消防沙", "隔离警示带", "锥筒", "防爆手电筒"] 
    },
    { 
        topic: "卸油时发生混油", 
        measures: [
            "停止接卸作业，关闭油罐车卸油阀；如油罐车有紧急切断阀，立即按下按钮，报告；",
            "停止混油油罐对应的加油枪作业，如顾客受油容器已加入混合油品，及时与顾客协商置换油品；",
            "确认混油数量；",
            "根据油品质量情况，提出处理意见；",
            "视情况申请清洗油罐"
        ], 
        supplies: ["消防沙", "灭火器", "灭火毯", "隔离警示带", "锥筒"] 
    },
    { 
        topic: "加错油", 
        measures: [
            "停止加油，报告班长；",
            "向顾客赔礼道歉；",
            "征求顾客同意后，聘请专业人士抽出混合油品，重新加入合格油品；",
            "根据情况协商处理，赔偿顾客损失。情况严重时，联系汽车修理厂清洗油箱"
        ], 
        supplies: ["消防沙", "灭火器", "灭火毯", "隔离警示带", "锥筒"] 
    },
    { 
        topic: "埋地罐操作井内起火", 
        measures: [
            "停止作业，切断电源，呼喊示警；",
            "使用灭火毯或者灭火器进行初期扑救；",
            "现场警戒，疏散人员、车辆；",
            "密切注意火势发展，情况危急时，撤离现场，等待救援"
        ], 
        supplies: ["消防沙", "灭火器", "灭火毯", "隔离警示带", "锥筒"] 
    },
    { 
        topic: "电气设备着火处置", 
        measures: ["停止作业，切断总电源，呼喊示警；", "使用灭火器扑救，报告上级，拨打119；", "当无法切断电源时，应确保人员在不触电情况下使用灭火器扑救；", "使用绝缘物体尽快切断电源；", "现场警戒，疏散人员、车辆；", "密切注意火势发展，情况危及人身安全时，撤离现场，等待救援"], 
        supplies: ["灭火器", "灭火毯", "隔离警示带", "锥筒", "消防沙"] 
    },
    { 
        topic: "加油车辆着火处置", 
        measures: ["加油车辆发生自燃，立即切断加油机紧急停止按钮，迅速使用灭火器扑救；", "车辆油箱、车载敞口容器着火，首选灭火毯覆盖油箱口窒息灭火；", "现场警戒，疏散人员、车辆"], 
        supplies: ["灭火毯", "灭火器", "隔离警示带", "锥筒", "消防沙"] 
    },
    { 
        topic: "加油机着火处置", 
        measures: ["停止作业，依次关闭加油机紧急停止按钮、收银室内急停按钮、加油站电源总闸，呼喊示警；", "用灭火毯覆盖或用灭火器扑救，将加油车辆推离现场；", "如加油机附近地面油品着火，用消防砂进行覆盖，或用灭火器扑救；", "现场警戒，疏散人员车辆；", "密切注意火势发展，情况危及人身安全时，撤离现场，等待救援"], 
        supplies: ["灭火器", "灭火毯", "消防砂", "隔离警示带", "锥筒"] 
    },
    { 
        topic: "卸油作业油罐车着火处置", 
        measures: ["停止卸油，呼喊示警；", "关闭油罐车卸油阀，如油罐车有紧急切断阀，立即按下按钮；", "关闭油罐卸油阀；", "用灭火毯覆盖或用灭火器进行初期扑救；", "卸下卸油软管，取下静电接地夹。设法使油罐车驶离加油站；", "密切注意火势发展，情况危及人身安全时，撤离现场，等待救援"], 
        supplies: ["灭火器", "灭火毯", "隔离警示带", "锥筒", "消防沙"] 
    },
    { 
        topic: "邻近区域着火处置", 
        measures: ["报告班长或站长，拨打 119；", "视情况切断电源，关闭阀门；", "用灭火毯覆盖卸油口、计量操作井井盖；", "对存放润滑油仓库等采取防范措施；", "布置灭火器材，做好临战准备。现场警戒，密切监控火势发展"], 
        supplies: ["灭火器", "灭火毯", "隔离警示带", "锥筒", "消防沙"] 
    },
    { 
        topic: "人体意外着火处置", 
        measures: ["大声呼喊示警，报告，拨打 120；", "迅速将着火者衣物脱下，如无法脱下，可原地打滚压灭火苗；", "用灭火毯包裹人体着火部位进行窒息灭火或用水浇灭着火物；", "特殊情况时可使用灭火器灭火，但不能喷射面部"], 
        supplies: ["灭火毯", "灭火器", "隔离警示带", "锥筒", "消防沙"] 
    },
    { 
        topic: "两车相撞处置", 
        measures: ["停止相关区域作业，呼喊示警；", "现场隔离，做好车辆引导，合理调整加油车位；", "协助联系保险公司和汽车修理厂；", "如两车发生争执无法解决，拨打 122 或 110"], 
        supplies: ["灭火毯", "灭火器", "隔离警示带", "锥筒", "消防沙"] 
    },
    { 
        topic: "加油站内车辆碰撞设备处置", 
        measures: ["停止作业，视情况依次关闭加油机紧急停止按钮、收银室内急停按钮、加油站电源总闸，呼喊示警，向班长、站长汇报；", "现场区域警戒，做好车辆引导，合理调整操作车位；", "如果发生油品泄漏或火灾，则采取相应措施"], 
        supplies: ["电话", "消防沙", "灭火器", "灭火毯", "隔离警示带", "锥筒"] 
    },
    {
        topic: "雪灾冰冻发生时应对措施（罩棚坍塌）",
        measures: [
          "切断电源，停止营业，报告加油站经理",
          "若坍塌罩棚下有车辆被困，首先确认有无人员伤亡，开展前期救助",
          "在坍塌区域、进出口处实施现场警戒，禁止车辆、人员进站"
        ],
        supplies: [
          "防爆手电筒",
          "急救箱",
          "灭火器材",
          "隔离警示带",
          "锥形事故柱等"
        ]
      },
      {
        topic: "雪灾设备冻害",
        measures: [
          "密切关注输油管线冻害变化情况",
          "发现由于冻胀出现决裂管线、油罐移位等征兆，报告班长，根据指示停止作业，切断电源，设置警示标志",
          "根据指示疏散车辆和人员",
          "若管线冻胀出现油品泄漏，根据指示启动埋地管线或埋地油罐油品泄漏应对措施"
        ],
        supplies: [
          "防爆工具",
          "气体检测仪",
          "铝桶",
          "吸油毡",
          "隔离警示带",
          "锥筒等"
        ]
      },
      {
        topic: "大风预警（大风来临前应对措施）",
        measures: [
          "根据指示清理、转移或加固松散易倒、在强风中会造成损坏或丢失的物品",
          "检查抢险物资，确保处于完好可用状态",
          "关好各建筑物门窗，撤离危险地带或区域",
          "根据安排做好油罐车安全接卸准备"
        ],
        supplies: [
          "防爆手电筒",
          "安全帽",
          "应急灯",
          "隔离警示带",
          "锥筒等"
        ]
      },
      {
        topic: "大风响应（大风来临时应对措施）",
        measures: [
          "密切关注风力变化、设备设施受损等情况",
          "发现险情及时报告上级，根据指示停止作业，5 级以上风停止高处和动火作业，切断动力电源和罩棚照明电源，设置警示标志",
          "疏散车辆和人员",
          "远离简易房屋、罩棚等危险场所"
        ],
        supplies: [
          "防爆手电筒",
          "安全帽",
          "应急灯",
          "急救箱",
          "灭火器材",
          "隔离警示带",
          "锥筒等"
        ]
      },
      {
        topic: "高温天气预警（高温天气发生前的应对措施）",
        measures: [
          "及时了解高温中暑的自救方法，牢记前庭主管班前会提示",
          "协助班长配备清凉饮料、绿豆汤等降温食品"
        ],
        supplies: [
          "防暑降温药品",
          "体温计",
          "绿豆汤",
          "淡盐水等"
        ]
      },
      {
        topic: "高温天气预警（高温天气发生时的应对措施）",
        measures: [
          "若出现中暑症状，要立即示意班长",
          "一是调整恢复休息，二是补充清凉饮料，三是临时调整岗位，尽量处于阴凉、通风处",
          "在降温措施无效的情况下，立即去就近医院救治"
        ],
        supplies: [
          "防暑降温药品",
          "体温计",
          "绿豆汤",
          "淡盐水等"
        ]
      },
      {
        topic: "霜冻、道路结冰预警（霜冻、结冰天气发生前的应对措施）",
        measures: [
          "了解霜冻、道路结冰情况的危害，牢记班前会班长的提示",
          "若正处于往返加油站的途中，一定要乘坐合法交通工具，并提示驾驶员安全行车"
        ],
        supplies: [
          "棉被",
          "棉衣",
          "手套",
          "取暖设备",
          "铁锹",
          "工业用盐",
          "防爆手电",
          "充足的食物",
          "医药箱等"
        ]
      },
      {
        topic: "霜冻、道路结冰警（霜冻、结冰天气发生时的应对措施）",
        measures: [
          "做好自我保护工作，防止车辆失控被撞情况",
          "接卸油提前做好车辆防滑、防冻准备",
          "霜冻、道路结冰天气尽量避免开车出行，若必须出行，须做好必要的防范措施"
        ],
        supplies: [
          "棉被",
          "棉衣",
          "手套",
          "取暖设备",
          "铁锹",
          "工业用盐",
          "防爆手电",
          "充足的食物",
          "医药箱等"
        ]
      },
      {
        topic: "霜冻、道路结冰预警（霜冻、结冰天发生后的应对措施）",
        measures: [
          "如发现有人员受伤，应立即进行现场救护，并及时报告班长",
          "保存好现场受损资料"
        ],
        supplies: [
          "棉被",
          "棉衣",
          "手套",
          "工业用盐",
          "防爆手电",
          "充足的食物",
          "医药箱等"
        ]
      },
      {
        topic: "疑似抢劫",
        measures: [
          "根据班长的安排，锁上门窗，按下报警器按钮",
          "切断加油机电源",
          "离开收银室前尽可能锁上收银机",
          "躲藏至歹徒看不见的地方等候警察到来"
        ],
        supplies: [
          "电话",
          "报警器等"
        ]
      },
      {
        topic: "歹徒实施抢劫",
        measures: [
          "保持冷静，在心里默念“不要慌”",
          "将之当作特殊客户服务，完全与罪犯合作，而不要试图阻止抢劫，人身安全比财物更重要，除非对方伤害你",
          "如歹徒询问如何打开保险柜、办公室门时，按加油站现金管理程序及要求统一口径如实回答。如：“银行上门收款，保险柜须加油站和银行共同打开”等",
          "不要盯着歹徒脸看，一直让手在对方视线内",
          "尽量记住歹徒的长相、年龄、性别、身高、体型、口音和服装等特征",
          "等到罪犯全部离开后才可移动，在任何情况下都不要跟踪罪犯或离开加油站",
          "与歹徒对话时合理用语，避免语言上惹怒歹徒"
        ],
        supplies: [
          "电话",
          "报警器",
          "视频监控",
          "盾牌",
          "伸缩钢叉",
          "警棍",
          "防爆头盔等"
        ]
      },
      {
        topic: "歹徒逃离现场",
        measures: [
          "记住歹徒逃离的方向和所使用的交通工具",
          "帮助站长回忆歹徒的体貌特征和作案过程，以及其他所有可能协助破案的线索。主要包括歹徒人数、性别、年龄、身高、体型、长相、口音、着装及行走特点、所持凶器、抢劫路径、交通工具颜色、牌号等细节",
          "不要破坏歹徒留下的现场或任何物品",
          "留住所有现场目击证人，等待警方到场；或者询问每位目击者姓名、住址和电话号码"
        ],
        supplies: [
          "电话",
          "报警器",
          "视频监控",
          "盾牌",
          "伸缩钢叉",
          "警棍",
          "防爆头盔等"
        ]
      },
      {
        topic: "盗窃",
        measures: [
          "协助班长保护现场，等待警察到来",
          "积极配合现场调查，提供可能的破案线索",
          "协助班长清点、确认损失"
        ],
        supplies: [
          "电话",
          "报警器",
          "视频监控",
          "防爆器械等"
        ]
      },
      {
        topic: "发现可疑物",
        measures: [
          "根据指示切断总电源、停止作业",
          "协助班长进行现场警戒，疏散人员、车辆，迅速撤离",
          "协助保护好现场、迎接警察，并指引到可疑物存放点",
          "主动配合调查，向警察提供有价值信息"
        ],
        supplies: [
          "视频监控",
          "报警器",
          "灭火器",
          "隔离警示带",
          "锥筒等"
        ]
      },
      {
        topic: "遇匿名威胁爆炸或扬言爆炸",
        measures: [
          "关闭电源、停止作业",
          "现场警戒，疏散人员、车辆，迅速撤离",
          "撤离后密切关注周围的可疑人、事、物"
        ],
        supplies: [
          "视频监控",
          "报警器",
          "灭火器",
          "隔离警示带",
          "锥筒等"
        ]
      },
      {
        topic: "遇纵火恐怖袭击",
        measures: [
          "停止作业，切断加油机紧急停止按钮、收银间急停按钮、加油设备总电源",
          "按指挥进行现场警戒，疏散人员、车辆，迅速撤离工作",
          "在进站口警戒，阻止人员和车辆进入",
          "迎接消防车和公安人员",
          "配合公安人员进行调查工作"
        ],
        supplies: [
          "视频监控",
          "报警器",
          "灭火器",
          "隔离警示带",
          "锥筒等"
        ]
      },
      {
        topic: "群体性事件",
        measures: [
          "停止作业，疏散现场车辆、人员",
          "做好站内人员集聚疏导和现场秩序维护",
          "若事态进一步扩大，尽量避免发生肢体冲突，同时密切关注，防范情绪激动者可能进行的破坏或袭击，加强重点要害部位的防护"
        ],
        supplies: [
          "视频监控",
          "报警器",
          "盾牌",
          "伸缩钢叉",
          "警棍",
          "防爆头盔等"
        ]
      },
      {
        topic: "人员持刀袭击",
        measures: [
          "切断加油机电源，按下报警器按钮",
          "使用防爆用具保护自身安全，尽可能与暴恐分子周旋，争取外部救援力量到来",
          "如果抵抗不住，躲藏至歹徒看不见的地方等候警察到来",
          "保护现场，设置警戒线，阻止无关人员进行现场",
          "协助班长清理现场，整理器材"
        ],
        supplies: [
          "视频监控",
          "报警器",
          "电话",
          "防爆头盔",
          "盾牌",
          "警棍",
          "钢叉等"
        ]
      },
      {
        topic: "人员驾车恶意冲撞",
        measures: [
          "切断加油设备电源，停止作业",
          "按照指示进行现场警戒，疏散人员、车辆迅速撤离，在进站口警戒，阻止人员和车辆进入",
          "对重点部位进行防护，避免事态进一步恶化",
          "设置灭火器，做好现场灭火救援准备",
          "协助公安机关合力制伏犯罪分子",
          "配合公安机关开展调查"
        ],
        supplies: [
          "视频监控",
          "报警器",
          "灭火器",
          "隔离警示带",
          "锥筒等"
        ]
      },
      {
        topic: "食物中毒",
        measures: [
          "主要表现症状：恶心、呕吐、腹痛、腹泻等",
          "预防措施：不吃生冷食物，食物生熟要分开，不到无卫生许可的摊档购买食品，碗筷要先清洁消毒后使用",
          "当有员工出现等食物中毒症状时，立即送中毒人员到医院救治，配合卫生部门开展食物调查和病因诊断等工作"
        ],
        supplies: [
          "体温计",
          "水等"
        ]
      },
      {
        topic: "禽流感",
        measures: [
          "预防措施：避免接触染病的禽类及其粪便，避免食用活的或未经煮熟的鸡鸭及其产品，勤洗手，注意个人卫生",
          "经过疫区人员要注意佩戴防疫用品",
          "发现有禽流感症状时，立即送到医院就诊，并跟踪病情发展，及时获取诊断信息",
          "被确诊为禽流感时，如实反映与自己有接触的相关人员",
          "基本症状：早期表现类似普通流感，病急，体温大多持续在 39°C 以上，部分患者伴有恶心、腹痛、腹泻、稀水样便等消化道症状",
          "传播途径：通过呼吸道和消化道传播"
        ],
        supplies: [
          "体温计",
          "水等"
        ]
      },
      {
        topic: "甲型 H1N1 型流感",
        measures: [
          "预防措施：尽量避免前往人多拥挤、空气流通较差的公共场所",
          "加强个人卫生和家庭环境卫生，注意居室自然通风，养成勤洗手的习惯，尽量避免接触疫区人员",
          "当发现有甲型 H1N1 型流感时如实反映与自己有接触的相关人员。报告联系卫生防疫机构",
          "基本症状：早期症状与普通流感相似，包括发热、咳嗽、喉痛、身体疼痛、头痛、发冷和疲劳等，有些患者还会出现腹泻或呕吐、肌肉痛或疲倦等",
          "部分患者可迅速发展，出现突然高热、体温超过 39°C，甚至继发严重肺炎、急性呼吸窘迫综合症等",
          "传播途径：通过呼吸道传播"
        ],
        supplies: [
          "体温计",
          "水等"
        ]
      },
      {
        topic: "加油站内车辆撞伤员工",
        measures: [
          "停止作业，关闭电源，呼喊示警",
          "采取紧急救护措施后，送受伤人员到就近医院救治",
          "实施现场警戒，保护事故现场，防止肇事车辆逃逸",
          "争取第三方证人，记录事故过程"
        ],
        supplies: [
          "消防沙",
          "灭火器",
          "灭火毯",
          "隔离警示带",
          "锥筒等"
        ]
      },
      {
        topic: "地面溢油",
        measures: [
          "停止作业，呼喊示警，报告",
          "现场警戒，疏散人员",
          "切断污染源，控制油品扩散",
          "测定风向，检测油蒸气、氧气浓度，预测油蒸气影响区域",
          "采取防火、防中毒措施，利用砂子等采取围囤、堵等措施控制溢油影响范围，回收溢油"
        ],
        supplies: [
          "吸油毡",
          "消防沙",
          "气体检测仪",
          "铝桶",
          "灭火器",
          "灭火毯",
          "隔离警示带",
          "锥筒等"
        ]
      },
      {
        topic: "台风与洪涝灾害前的应急准备",
        measures: [
          "通过广播、网络、电视等媒体，加油站微信、QQ群了解台风、暴雨预警信息",
          "清理，转移或加固松散易倒，在台风中会造成损坏或丢失的物品，对加油机采取防水措施",
          "提前对空油罐或存油量较少的油罐进行注油保护",
          "关闭管线阀门，密封入孔、计量口、卸油口等易进水部位"
        ],
        supplies: [
          "防爆抽油泵",
          "吸油毡",
          "塑料薄膜",
          "塑料胶带",
          "铁锹",
          "应急灯",
          "防爆手电筒",
          "铁丝等"
        ]
      },
      {
        topic: "台风与洪涝灾害发生时应急措施",
        measures: [
          "停止营业，切断电源",
          "疏散车辆和人员，设置警示标识",
          "留在坚固的房间（收银间）躲避"
        ],
        supplies: [
          "防爆抽油泵",
          "吸油毡",
          "塑料薄膜",
          "塑料胶带",
          "铁锹",
          "应急灯",
          "防爆手电筒",
          "铁丝等"
        ]
      },
      {
        topic: "台风与洪涝灾害发生后生产恢复措施",
        measures: [
          "清理及恢复现场，清洁设备",
          "检测电气设备和线路，确认安全后方开通电",
          "加油站持续降雨时要利用液位仪或人工方法测量罐内水位情况",
          "及时报告出险情况，保存受损现场的声像资料，统计损失，准备索赔"
        ],
        supplies: [
          "防爆抽油泵",
          "吸油毡",
          "应急灯",
          "防爆手电筒",
          "铁丝",
          "量油尺",
          "试水膏",
          "隔离警示带",
          "锥筒等"
        ]
      },
      {
        topic: "雷电发生前的应急准备",
        measures: [
          "了解雷电对加油站设备的危害，牢记班长班前会的提示",
          "协助班长对加油站防雷设备设施进行全面检查"
        ],
        supplies: [
          "防爆手电筒",
          "应急灯",
          "应急药箱等"
        ]
      },
      {
        topic: "雷电发生时的应对措施",
        measures: [
          "停止一切现场作业",
          "提示进站司机雷电期间停止作业",
          "提示站内人员，避免使用手机、广播等电子设备",
          "尽量留在室内，不到高处或空旷处",
          "如发现有人员受伤，应立即进行现场救护，并及时告知班长"
        ],
        supplies: [
          "防爆手电筒",
          "应急灯",
          "应急药箱等"
        ]
      },
      {
        topic: "雪灾预警（雪灾冰冻发生前应急准备）",
        measures: [
          "协助班长做好保暖防冻措施，增添衣物、手套、药膏等",
          "水管线、水泵等设备要采取排水措施或采用管道保温材料进行包裹、覆盖",
          "协助班长加强重要部位与关键设备的巡检"
        ],
        supplies: [
          "草垫",
          "融雪剂",
          "管道保温材料",
          "防滑垫",
          "防冻伤药膏",
          "安全帽",
          "隔离警示带等"
        ]
      },
      {
        topic: "雪灾冰冻发生时应对措施（罩棚未坍塌）",
        measures: [
          "协助班长及时清除作业现场的积雪、冰凌与冰面",
          "协助班长，定时测量罩棚附近地面的积雪厚度，以此推测罩棚上的积雪厚度，向班长报告",
          "协助班长定时对罩棚，立柱等进行安全巡查，发现险情或听到异常声音时，尽快组织撤离，报告加油站经理",
          "卸油作业安排在白天进行，清扫积雪，铺设防滑垫",
          "监控加油现场情况，如遇险情及时切断电源",
          "根据指示，在罩棚坍塌风险关停时，对出入口处实施现场警戒，禁止车辆、人员进站"
        ],
        supplies: [
          "防爆手电筒",
          "安全帽",
          "防滑垫",
          "应急灯",
          "隔离警戒带",
          "锥筒等"
        ]
      }
];


const choiceList = [
    { question: "1、加油站事故处理严格执行（ ）的原则。", options: {A:"四不放过", B:"一站一策", C:"三不放过", D:"二不放过"}, answer: "A" },
    { question: "2、加油站有观测井的加油站应（ ）检查1次观测井内有无油花，无观测井的应每周检查1次油罐周边有无渗漏现象。", options: {A:"每年", B:"每季度", C:"每月", D:"每日"}, answer: "D" },
    { question: "3、加油站卸油应采用（ ），并在各接口处设闷盖，闭合严密。", options: {A:"半密闭式", B:"密闭式", C:"随意式", D:"敞开式"}, answer: "B" },
    { question: "4、灭火器定期检验换药，有更换记录和有效期标签：干粉灭火器每（ ）换药一次，二氧化碳灭火器每年称重一次。", options: {A:"0.5年", B:"1年", C:"1.5年", D:"2年"}, answer: "D" },
    { question: "5、电脑加油机的加油操作有（ ）两种方法。", options: {A:"定量与定金额", B:"非定量与定金额", C:"定量与非定量", D:"定量与定容量"}, answer: "A" },
    { question: "6、汽车加油站使用的储油罐宜采用（ ）罐。", options: {A:"地上立式", B:"地下卧式", C:"地下立式", D:"地上卧式"}, answer: "B" },
    { question: "7、自封油枪加油时，油枪嘴插入油箱的要求是（ ）。", options: {A:"枪嘴", B:"枪嘴口", C:"枪嘴根部", D:"枪嘴中部"}, answer: "C" },
    { question: "8、卸油油气回收与密闭卸油，工艺的主要不同之处是油罐车与地下油罐之间加设了一条（ ）连通管道。", options: {A:"呼吸管", B:"卸油管", C:"油气回收", D:"吸油管"}, answer: "C" },
    { question: "9、下列属于安全管理工作的是( )", options: {A:"对加油站进行安全检查", B:"对加油机进行维修", C:"采用密闭卸油方式卸油", D:"卧室储油罐呼吸管口安装阻火器（防火帽）"}, answer: "A" },
    { question: "10、下列行为符合加油站安全管理规定的是( )", options: {A:"直接对塑料桶加注油品", B:"卸油作业时，与收油罐相连的加油机同时进行加油作业", C:"拒绝为未熄火的车辆加油", D:"司机在加油作业区内修理车辆"}, answer: "C" },
    { question: "11、下列违反加油作业区安全管理规定的是( )", options: {A:"拒绝为存在安全隐患的车辆加油", B:"高强电闪，雷电频繁时停止加油作业", C:"禁止司机在加油作业区内拨打、接听手机", D:"允许乘客在加油作业区内随意走动"}, answer: "D" },
    { question: "12、下列行为不符合加油站营业室安全管理规定的是( )", options: {A:"保险柜随手乱码", B:"营业收银室的门随手关闭", C:"加油站的同事可以随意出入收银室", D:"超过规定额度的大额现钞应随手丢入保险柜"}, answer: "C" },
    { question: "13、下列行为符合加油站营业室安全管理规定的是( )", options: {A:"加油站长自由出入营业收银室", B:"营业收银室的门上锁", C:"亲戚、朋友随意进入营业收银室", D:"保险柜不随手乱码"}, answer: "B" },
    { question: "14、下列符合储油区安全管理规定的是( )", options: {A:"卸油口加锁", B:"打开计量孔盖卸油", C:"储油区堆放杂物", D:"油罐井内有污水、杂物"}, answer: "A" },
    { question: "15、下列符合储油区安全管理规定的是( )", options: {A:"为加快卸油速度，可以打开计量孔盖卸油", B:"油罐卸油口必须加锁", C:"油罐区可以种植油性植物", D:"为防止油气积聚，油罐井必须敞开"}, answer: "B" },
    { question: "16、下列描述不符合发票安全管理规定的是( )", options: {A:"增值税发票即是发票也是税票", B:"发票必须专人专柜保管", C:"伪开、虚开、错开增值税发票违法", D:"加油站使用电脑开票须经税务部门批准"}, answer: "C" },
    { question: "17、下列违反加油站进站须知规定内容的是( )", options: {A:"可以小流量向塑料可乐瓶内加油", B:"严禁加油站内从事可能产生火花的作业", C:"严禁加油场所脱和拍打化纤衣物", D:"不得携带危险品进站"}, answer: "A" },
    { question: "18、下列不属于顾客进站必须告知的安全事项内容的是( )", options: {A:"站内严禁烟火", B:"加油现场严禁使用手机、寻呼机", C:"严禁在站内检修车辆", D:"加油前，加油机泵码必须回零"}, answer: "D" },
    { question: "19、严禁在加油现场穿、脱、拍打化纤服装的主要原因是( )", options: {A:"会妨碍员工的视线", B:"防止产生静电火花", C:"避免顾客丢失物品", D:"不雅观，影响加油站形象"}, answer: "B" },
    { question: "20、加油站作业现场严禁使用手机的主要原因是( )", options: {A:"手机会产生电火花,有可能引爆油蒸气混合物", B:"手机会产生磁场,有可能引爆油蒸气混合物", C:"接听、拨打手机会产生电磁波,有可能引爆油蒸气混合物", D:"手机会产生电弧,有可能引爆油蒸气混合物"}, answer: "C" },
    { question: "21、下列物质，属于助燃物的是( )", options: {A:"汽油", B:"空气", C:"木柴", D:"塑料"}, answer: "B" },
    { question: "22、静电最大的危害是( )", options: {A:"形成静电场", B:"产生静电压", C:"出现静电放电现象", D:"产生静电流"}, answer: "C" },
    { question: "23、下列说法，正确的是( )", options: {A:"为争取作业时间，对油罐车计量作业前不一定非要静止一段时间不可", B:"有防雷装置的加油站，在高强电闪、雷击频繁的天气不必停止加油作业", C:"卸油时，应尽可能加快卸油速度，不必控制流速", D:"油船接卸油品时，必须连接静电接地装置"}, answer: "D" },
    { question: "24、加油站预防人体静电最主要的措施是( )", options: {A:"作业前，触摸接地金属", B:"不穿化纤服，穿棉工作服", C:"穿绝缘靴", D:"戴手套"}, answer: "B" },
    { question: "25、加油站的下列区域，一般不应接临时电源的是 ( )", options: {A:"加油作业区域", B:"营业室", C:"发、配电房", D:"休息室"}, answer: "A" },
    { question: "26、油品及其蒸气的毒性主要是通过( )、呼吸道和消化道进入人体", options: {A:"口腔", B:"心脏", C:"肺", D:"皮肤接触"}, answer: "D" },
    { question: "27、下列说法不正确的是( )", options: {A:"加油作业过程中，加油作业人员应尽可能地站在上风或侧风方向", B:"加油站工作人员应讲究个人卫生，做到饭前洗手", C:"加油站工作人员的工作服应勤洗，保持干净", D:"用口吸气，使油品从油箱中经软管自流而出"}, answer: "D" },
    { question: "28、下列( )作业，可以减少加油站内的油气浓度，利于加油站安全和工作人员的身体健康", options: {A:"加油作业结束后，很快提枪", B:"加入铁桶中的油品，未完全倒干净", C:"打开计量孔盖卸油", D:"使用带油气回收功能的加油枪"}, answer: "D" },
    { question: "29、当作业人员出现油气中毒事故后，首先应该 ( )", options: {A:"将油气中毒者迅速移动到空气新鲜、流动的地方", B:"松开中毒者领口，紧身衣物、腰带等", C:"让中毒者静卧、自由呼吸", D:"进行人工呼吸"}, answer: "A" },
    { question: "30、大量汽油不慎溅入人的眼睛时，应立即( )", options: {A:"送往医院", B:"用大量的水冲洗", C:"用湿毛巾擦洗", D:"用餐巾纸擦干净"}, answer: "B" },
    { question: "31、触电急救，关键在一个快字。快包括两个方面，一是快速脱离电源；二是快( )", options: {A:"汇报情况", B:"呼救", C:"作医务救护处理", D:"报警"}, answer: "C" },
    { question: "32、加油车辆油箱突然起火，加油员应 ( )", options: {A:"立即停止加油", B:"首先报告领班或经理", C:"立即用灭火毯扑救", D:"报119火警"}, answer: "A" },
    { question: "33、应对突发事件的最根本措施是 ( )", options: {A:"制订应急预案", B:"员工熟悉应急预案", C:"应急预案演练", D:"预测、预防"}, answer: "D" },
    { question: "34、油品具有易燃性，是因为 ( )", options: {A:"油品的热值非常高", B:"点燃油品及其蒸气所需要的能量很小", C:"油品的闪点低", D:"油品的自燃点低"}, answer: "B" },
    { question: "35、防火的工作重心（出发点）是( )", options: {A:"控制火源", B:"按规定配备消防器材", C:"加强安全检查、监督", D:"消防预案的制订"}, answer: "A" },
    { question: "36、窒息法适用的场合是 ( )", options: {A:"密闭容器初期火灾", B:"罩棚火灾", C:"油泵房火灾", D:"营业室火灾"}, answer: "A" },
    { question: "37、下列说法，正确的是 ( )", options: {A:"采用窒息法灭火时，应用石棉被、浸湿的棉被、帆布等不燃或难燃材料，覆盖燃烧物或封闭孔洞", B:"采用窒息法灭火时，可以采用任何物料覆盖燃烧物或封闭孔洞", C:"只要是密闭容器火灾，都可以采用窒息法扑救", D:"用水来扑灭任何液体火灾"}, answer: "A" },
    { question: "38、下列说法，正确的是( )", options: {A:"可以用水来扑灭流散油品火灾", B:"可以用水来扑救带电设备火灾", C:"可以用水来扑救加油站建筑物火灾", D:"水可以用来扑救任何液体、固体火灾"}, answer: "C" },
    { question: "39、当油罐发生火灾时，应将水喷洒在( )", options: {A:"着火油罐的油面上", B:"着火油罐的罐壁上", C:"着火油罐的罐顶上", D:"以上三处中的任一处"}, answer: "B" },
    { question: "40、采用冷却法扑救油品火灾时，下列说法正确的是 ( )", options: {A:"灭火剂如水不能直接喷洒在燃烧着的油面上", B:"水要直接喷洒在燃烧着的油面上", C:"水不能喷洒在火焰的根部", D:"水要喷洒在火焰的周围"}, answer: "A" },
    { question: "41、下列关于手提式干粉灭火器使用操作的描述，正确的是 ( )", options: {A:"提起灭火器，拔下保险拴，一手握住喷嘴，一手用力压下压把，对准燃烧物的火焰根部直接喷射", B:"提起灭火器，一手握住喷嘴，一手用力压下压把，拔下保险拴，对准燃烧物的火焰根部直接喷射", C:"提起灭火器，一手握住喷嘴，拔下保险拴，一手用力压下压把，对准燃烧物的火焰根部直接喷射", D:"提起灭火器，一手用力压下压把，一手握住喷嘴，拔下保险拴，对准燃烧物的火焰根部直接喷射"}, answer: "A" },
    { question: "42、使用8Kg手提式干粉灭火器时，不要被烟雾迷惑，尽可能靠近燃烧物( )米左右处喷射", options: {A:"1", B:"3", C:"5", D:"7"}, answer: "B" },
    { question: "43、用石棉被扑救容器火灾的方法称为( )", options: {A:"窒息法", B:"冷却法", C:"隔离法", D:"负催化抑制法"}, answer: "A" },
    { question: "44、使用石棉被灭火时，下列说法不正确的是 ( )", options: {A:"应严密地将容器口密封", B:"应是油品初期火灾", C:"动作要快，要准", D:"应从下风方向接近容器口进行扑救"}, answer: "D" },
    { question: "45、消防沙池加盖的主要原因是 ( )", options: {A:"保持沙池中沙子干燥", B:"保持沙池中沙的干净", C:"防止扬起沙尘", D:"为了美观、好看"}, answer: "A" },
    { question: "46、下列说法，不正确的是 ( )", options: {A:"消防沙可以用来扑救任何火灾", B:"可以用消防沙来扑救流散液体火灾", C:"用沙灭火时，应将沙直接覆盖在燃烧物上", D:"细沙的灭火效果比粗沙的灭火效果好"}, answer: "A" },
    { question: "47、加油站发生油品初起火灾后，正确的处理程序是 ( )", options: {A:"停止作业，大声呼救，疏散车辆人员，启动灭火预案，就地取用器材扑救", B:"停止作业，就地取用器材扑救，大声呼救，启动灭火预案，疏散车辆人员", C:"停止作业，大声呼救，就地取用器材扑救，疏散车辆人员，启动灭火预案", D:"停止作业，大声呼救，就地取用器材扑救，启动灭火预案，疏散车辆人员"}, answer: "D" },
    { question: "48、加油站油品初起火灾最常用的灭火方法是( )", options: {A:"窒息法", B:"冷却法", C:"隔离法", D:"负催化抑制法"}, answer: "A" },
    { question: "49、下列说法，正确的是 ( )", options: {A:"任何时刻，油品火灾都可以用窒息法进行扑救", B:"封闭油罐口时，要注意从下风方向靠近", C:"采用窒息法扑灭罐车火灾后，应立即拿开灭火毯通风，防止油罐发生爆炸", D:"当油火一时无法扑灭时，要及时指挥疏散车辆人员，防止火势蔓延或造成伤害"}, answer: "D" },
    { question: "50、加错油后，正确的处理程序是( )", options: {A:"停止作业，当面道歉，报告站长，抽出混油，协商赔偿，表示歉意，确认损失", B:"报告站长，停止作业，当面道歉，抽出混油，协商赔偿，表示歉意，确认损失", C:"停止作业，当面道歉，抽出混油，协商赔偿，报告站长，再次歉意，确认损失", D:"停止作业，当面道歉，抽出混油，协商赔偿，再次歉意，报告站长，确认损失"}, answer: "A" },
    { question: "51、现加错油后，首先应该 ( )", options: {A:"报告站长（计量员）", B:"关闭加油机，停止作业", C:"说明原因，表示歉意", D:"协商赔偿"}, answer: "B" },
    { question: "52、处理加错油事故过程中，下列说法正确的是 ( )", options: {A:"当加错量较小时，则不必协商赔偿", B:"满足顾客的合理要求", C:"交给同班同事处理", D:"同顾客争辩"}, answer: "B" },
    { question: "53、下列应对抢劫事件的措施，一般不采用的是( )", options: {A:"按下报警按钮", B:"采取拖延战术，等待救援", C:"在力量悬殊的情况下，同歹徒搏斗", D:"观察歹徒特征和逃跑路线，歹徒离开后报警"}, answer: "C" },
    { question: "54、油站发生盗窃后，当班员工首先应该( )", options: {A:"保护现场并报告站长", B:"清点物品并报告站长", C:"报告站长（计量员）", D:"报告公司主管领导"}, answer: "A" },
    { question: "55、移动电话报火警，应 ( )", options: {A:"加拨区号", B:"直拨“119”", C:"直拨“110”", D:"直拨“121”"}, answer: "B" },
    { question: "56、通过消防演练，义务消防队员要做到 ( )", options: {A:"会报警、会使用器材、会扑救初起火灾、会使用防护器具和自救", B:"会报警、会使用器材、会扑救初起火灾、会防污治污", C:"会报警、会使用器材、会扑救初起火灾", D:"会报警、会使用器材、会扑救初起火灾、会警戒和疏散"}, answer: "A" },
    { question: "57、下列不属于加油站危害控制的是 ( )", options: {A:"严禁吸烟、拨打手机", B:"严禁直接用塑料容器加油", C:"防静电服装穿戴整齐", D:"卸完油后需倒车进行二次卸油"}, answer: "D" },
    { question: "58、加油站罐区一般要求配置( )灭火器", options: {A:"手提式二氧化碳", B:"手提式干粉", C:"手提式泡沫", D:"推车式干粉"}, answer: "D" },
    { question: "59、灭火器在（ ）区域是正常状态", options: {A:"黄色", B:"绿色", C:"红色"}, answer: "B" },
    { question: "60、新员工三级安全教育时间不得少于（ ）小时。", options: {A:"70", B:"71", C:"72", D:"73"}, answer: "C" }
];

new Vue({
    el: '#app',
    data: {
        view: 'main', state: 'idle', subMode: 'study',
        currentModule: '', currentQ: {}, 
        curChoiceIdx: 0, 
        currentIdx: 0, 
        // 新增：乱序开关
        isRandom: false,
        // 新增：工作列表，用于存储当前（可能是乱序后）的题目列表
        workingList: [],
        stats: {
          total: 0,
          correct: 0,
          wrong: 0
        },
        isRecoverable: false,
        userInputs: [], 
        // 新增：背题模式的输入数组
        studyInputs: [],
        // 新增：模糊匹配分数
        fuzzyScores: [],
        results: [], supplyInput: '', supplyCorrect: false,
        isSubmitted: false, tempSelect: null,
        essayData, specialData, machineData, choiceList, emergencyData
    },
    computed: {
        navPath() {
            const map = { main:'主菜单', menu_a:'应急处置', menu_b:'应知应会', menu_b2:'问答题', menu_c:'规程', menu_c1:'使用维护', menu_c2:'特情' };
            return (map[this.view] || '主页') + (this.state !== 'idle' ? ' > 正在练习' : '');
        },
        totalInModule() {
            // 现在总是基于 workingList 计算长度
            return this.workingList.length;
        },
        activeAnswers() {
            return this.currentQ.items || this.currentQ.measures || [];
        }
    },
    methods: {
        go(v) { this.view = v; this.state = 'idle'; },
        goHome() { this.view = 'main'; this.state = 'idle'; },
        
        // 数组打乱算法 (Fisher-Yates)
        shuffleArray(arr) {
            let newArr = JSON.parse(JSON.stringify(arr));
            for (let i = newArr.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [newArr[i], newArr[j]] = [newArr[j], newArr[i]];
            }
            return newArr;
        },

        // 模糊匹配算法：计算文本相似度
        calculateSimilarity(s1, s2) {
            // 1. 预处理：去除标点符号和空格，统一转小写
            const clean = (str) => str.replace(/[^\u4e00-\u9fa5a-zA-Z0-9]/g, '').toLowerCase();
            const a = clean(s1);
            const b = clean(s2);
            
            if (a.length === 0 || b.length === 0) return 0;
            if (a === b) return 1;

            // 2. Levenshtein Distance 算法
            const matrix = [];
            for (let i = 0; i <= b.length; i++) { matrix[i] = [i]; }
            for (let j = 0; j <= a.length; j++) { matrix[0][j] = j; }

            for (let i = 1; i <= b.length; i++) {
                for (let j = 1; j <= a.length; j++) {
                    if (b.charAt(i - 1) == a.charAt(j - 1)) {
                        matrix[i][j] = matrix[i - 1][j - 1];
                    } else {
                        matrix[i][j] = Math.min(
                            matrix[i - 1][j - 1] + 1, 
                            matrix[i][j - 1] + 1,     
                            matrix[i - 1][j] + 1      
                        );
                    }
                }
            }
            const distance = matrix[b.length][a.length];
            const maxLength = Math.max(a.length, b.length);
            return 1 - (distance / maxLength);
        },

        goBack() {
          if (this.state !== 'idle') {
            this.saveCurrentState();
              if (this.state === 'choice') {
                  if (this.curChoiceIdx > 0) {
                      this.curChoiceIdx--;
                      this.loadCurrentState();
                  } else { this.state = 'idle'; }
              } else {
                  if (this.currentIdx > 0) {
                      this.currentIdx--;
                      this.loadCurrentState();
                  } else { this.state = 'idle'; }
              }
          } else {
              if (this.view.includes('_')) {
                  this.view = this.view.split('_').slice(0,-1).join('_') || 'main';
              } else { this.view = 'main'; }
          }
          this.saveProgress();
      },

      // 获取当前模式的原始数据源
      getSourceData(mod) {
          if(mod === 'emergency') return this.emergencyData;
          if(mod === 'machine') return this.machineData;
          if(mod === 'special') return this.specialData;
          if(mod === 'essay') return this.essayData;
          return [];
      },

      startTask(mod, mode, idx) {
            this.currentModule = mod;
            this.subMode = mode;
            this.state = 'active';
            
            // 初始化 workingList：如果是乱序模式则打乱，否则使用原顺序
            let source = this.getSourceData(mod);
            if(this.isRandom) {
                this.workingList = this.shuffleArray(source);
                this.currentIdx = 0; // 乱序后从第一题开始
            } else {
                this.workingList = JSON.parse(JSON.stringify(source));
                this.currentIdx = idx;
            }

            this.currentQ = JSON.parse(JSON.stringify(this.workingList[this.currentIdx]));
            this.resetQuiz();
        },

        startChoice() {
            this.state = 'choice'; 
            this.curChoiceIdx = 0;
            
            // 选择题同样支持乱序
            if(this.isRandom) {
                this.workingList = this.shuffleArray(this.choiceList);
            } else {
                this.workingList = JSON.parse(JSON.stringify(this.choiceList));
            }
            
            this.currentQ = this.workingList[0];
            this.isSubmitted = false; this.tempSelect = null;
        },

        handleSelect(k) {
          if(this.isSubmitted) return;
          this.tempSelect = k; 
          this.isSubmitted = true;
          this.stats.total++; 
          if (k === this.currentQ.answer) {
              this.stats.correct++;
          } else {
              this.stats.wrong++;
          }
          this.saveCurrentState(); 
          this.saveProgress();    
      },

        getOptClass(k) {
            if(!this.isSubmitted) return '';
            return k === this.currentQ.answer ? 'opt-correct' : (this.tempSelect === k ? 'opt-error' : '');
        },

        resetQuiz() {
            this.isSubmitted = false;
            // 清空填空题输入
            this.userInputs = new Array(this.activeAnswers.length).fill('');
            // 清空背题模式输入
            this.studyInputs = new Array(this.activeAnswers.length).fill('');
            this.results = new Array(this.activeAnswers.length).fill(false);
            this.fuzzyScores = new Array(this.activeAnswers.length).fill(0);
            this.supplyInput = '';
        },

        submit() {
          this.isSubmitted = true;
          this.stats.total++; 
          
          let isAllCorrect = true;
          this.activeAnswers.forEach((ans, i) => {
              const val = (this.userInputs[i] || "").trim();
              
              // 使用模糊匹配算法
              const similarity = this.calculateSimilarity(val, ans);
              this.fuzzyScores[i] = similarity;

              // 判定逻辑：长度>=4 且 (包含关键字 或 相似度>0.9)
              const isMatch = (val.length >= 2 && ans.includes(val)) || similarity >= 0.9;
              
              this.results[i] = isMatch;
              // 更新：为了显示，将分值存入 Vue 响应式数组
              this.$set(this.fuzzyScores, i, similarity);

              if (!isMatch) isAllCorrect = false;
          });
          
          if(this.currentQ.supplies) {
              // 物资也进行简单的包含匹配，不适用过于复杂的模糊逻辑以免误判
              this.supplyCorrect = this.currentQ.supplies.some(s => this.supplyInput.includes(s));
              if (!this.supplyCorrect) isAllCorrect = false;
          }
      
          if (isAllCorrect) {
              this.stats.correct++;
          } else {
              this.stats.wrong++;
          }
          this.saveCurrentState();
          this.saveProgress();
      },

  saveProgress() {
    const progress = {
      view: this.view,
      state: this.state,
      currentModule: this.currentModule,
      currentIdx: this.currentIdx,
      curChoiceIdx: this.curChoiceIdx,
      stats: this.stats, 
      isRandom: this.isRandom,
      // 关键：保存当前的题目顺序列表，防止乱序模式下刷新后顺序变了
      workingList: this.workingList, 
      lastTime: new Date().getTime()
  };
  localStorage.setItem('qsa_v15_progress', JSON.stringify(progress));
},

  loadProgress() {
    const saved = localStorage.getItem('qsa_v15_progress');
    if (saved) {
        const data = JSON.parse(saved);
        this.view = data.view;
        this.state = data.state;
        this.currentModule = data.currentModule;
        this.currentIdx = data.currentIdx;
        this.curChoiceIdx = data.curChoiceIdx;
        this.isRandom = data.isRandom || false;

        if (data.stats) this.stats = data.stats;
        
        // 恢复工作列表
        if (data.workingList) this.workingList = data.workingList;

        this.loadCurrentState(); 
        this.isRecoverable = false;
    }
},

saveCurrentState() {
    // 根据当前模式，将状态保存到 workingList 中对应的题目对象里
    if (this.state === 'choice') {
        if(this.workingList[this.curChoiceIdx]) {
            this.workingList[this.curChoiceIdx].userAnswer = this.tempSelect;
            this.workingList[this.curChoiceIdx].userSubmitted = this.isSubmitted;
        }
    } else {
        if(this.workingList[this.currentIdx]) {
            let q = this.workingList[this.currentIdx];
            q.userInputs = [...this.userInputs]; 
            q.studyInputs = [...this.studyInputs]; // 保存背题模式输入
            q.userSupply = this.supplyInput;
            q.userSubmitted = this.isSubmitted;
        }
    }
},

loadCurrentState() {
    if (this.state === 'choice') {
        let q = this.workingList[this.curChoiceIdx];
        this.currentQ = q;
        this.tempSelect = q.userAnswer || null;
        this.isSubmitted = q.userSubmitted || false;
    } else {
        let q = this.workingList[this.currentIdx];
        this.currentQ = JSON.parse(JSON.stringify(q));
        
        if (q.userInputs) {
            this.userInputs = [...q.userInputs];
            this.studyInputs = q.studyInputs ? [...q.studyInputs] : new Array(this.activeAnswers.length).fill('');
            this.supplyInput = q.userSupply || "";
            this.isSubmitted = q.userSubmitted || false;
            if (this.isSubmitted) this.reValidate();
        } else {
            this.resetQuiz();
        }
    }
},

reValidate() {
  this.activeAnswers.forEach((ans, i) => {
      const val = (this.userInputs[i] || "").trim();
      // 重新载入时也使用模糊逻辑校验
      const similarity = this.calculateSimilarity(val, ans);
      this.fuzzyScores[i] = similarity;
      this.results[i] = (val.length >= 2 && ans.includes(val)) || similarity >= 0.9;
  });
  if(this.currentQ.supplies) {
      this.supplyCorrect = this.currentQ.supplies.some(s => this.supplyInput.includes(s));
  }
},

next() {
    this.saveCurrentState();
    if(this.state === 'choice') {
        if(this.curChoiceIdx < this.workingList.length - 1) {
            this.curChoiceIdx++; 
            this.loadCurrentState();
        } else { 
            alert("本组练习结束");
            this.goBack(); 
        }
    } else { 
        if(this.currentIdx < this.workingList.length - 1) {
            this.currentIdx++; 
            // 注意：这里不能直接覆盖 currentQ，而是通过 loadCurrentState 来加载新题状态
            this.loadCurrentState();
        } else {
            alert("本章节练习完成！");
            this.goBack();
        }
    }
    this.saveProgress();
},

getInputClass(i) {
    return this.isSubmitted ? (this.results[i] ? 'input-correct' : 'input-error') : '';
}
    },
    
    mounted() {
      const savedData = localStorage.getItem('qsa_v15_progress');
      if (savedData) {
          this.isRecoverable = true;
      }
  }
});
</script>
</body>
</html>